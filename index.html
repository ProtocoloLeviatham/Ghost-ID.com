<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LEVIATHAM | GHOST ID GENERATOR</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Fuentes Tácticas, de Máquina de Escribir, Sellos y FIRMA -->
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Rajdhani:wght@500;600;700;800&family=Courier+Prime:wght@400;700&family=Fira+Code:wght@400;600&family=Special+Elite&family=Black+Ops+One&family=Libre+Barcode+39+Text&family=Mrs+Saint+Delafield&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --primary: #00ff00;
            --secondary: #004400;
            --bg-color: #0a0a0a;
            --glass: rgba(0, 20, 0, 0.95);
            --border: 1px solid #00ff00;
            --paper: #e8e4d9; 
            --ink: #1a1a1a;
        }

        body {
            background-color: var(--bg-color);
            color: var(--primary);
            font-family: 'Share Tech Mono', monospace;
            overflow-x: hidden;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* --- FONDO RED NEURONAL --- */
        #neural-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; opacity: 0.2; pointer-events: none; }

        /* --- EFECTO CRT --- */
        .crt::before {
            content: " "; display: block; position: absolute; top: 0; left: 0; bottom: 0; right: 0;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            z-index: 50; background-size: 100% 2px, 3px 100%; pointer-events: none;
        }
        .scanline {
            width: 100%; height: 100px; z-index: 51;
            background: linear-gradient(0deg, rgba(0,0,0,0) 0%, rgba(0, 255, 0, 0.2) 50%, rgba(0,0,0,0) 100%);
            opacity: 0.1; position: absolute; bottom: 100%;
            animation: scanline 8s linear infinite; pointer-events: none;
        }
        @keyframes scanline { 0% { bottom: 100%; } 100% { bottom: -100%; } }

        /* --- UI COMPONENTS --- */
        .container-main { max-width: 900px; margin: 0 auto; width: 100%; padding: 20px; position: relative; z-index: 60; flex-grow: 1; display: flex; flex-direction: column; }

        .cyber-panel {
            background: var(--glass); border: var(--border);
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.15);
            backdrop-filter: blur(4px); margin-bottom: 20px;
            position: relative;
        }

        .cyber-input {
            background: #0a0a0a; border: 1px solid #333; color: white;
            padding: 10px; width: 100%; font-family: 'Share Tech Mono', monospace;
            transition: 0.3s; text-transform: uppercase;
        }
        .cyber-input:focus { border-color: var(--primary); outline: none; box-shadow: 0 0 10px rgba(0,255,0,0.2); }

        .btn-action {
            background: var(--secondary); color: var(--primary); border: 1px solid var(--primary);
            padding: 15px; width: 100%; font-weight: bold; cursor: pointer;
            text-transform: uppercase; letter-spacing: 2px; transition: 0.2s;
            position: relative; overflow: hidden; display: flex; justify-content: center; gap: 10px; align-items: center;
        }
        .btn-action:hover { background: var(--primary); color: black; box-shadow: 0 0 20px var(--primary); }
        .btn-action:disabled { opacity: 0.5; cursor: not-allowed; filter: grayscale(1); }

        /* --- MOTOR 3D PURO --- */
        .scene-3d {
            width: 100%; max-width: 600px; height: 380px; /* Altura fija para mantener proporción tarjeta */
            margin: 20px auto;
            perspective: 1500px;
            cursor: grab;
        }
        .scene-3d:active { cursor: grabbing; }

        /* Envoltorio que rota */
        .card-object {
            width: 100%; height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.1s; /* Movimiento fluido sin lag */
        }

        /* Caras comunes */
        .card-face {
            position: absolute; width: 100%; height: 100%;
            backface-visibility: hidden; /* Oculta la cara trasera cuando está dada vuelta */
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 20px 50px rgba(0,0,0,0.9), inset 0 0 0 1px rgba(255,255,255,0.1);
            background-color: #080808;
            /* Textura base compartida */
            background-image: 
                radial-gradient(circle at 50% 50%, rgba(0, 50, 0, 0.1) 0%, transparent 60%),
                repeating-linear-gradient(45deg, rgba(255,255,255,0.03) 0px, rgba(255,255,255,0.03) 1px, transparent 1px, transparent 5px);
            border: 1px solid #444;
        }

        /* --- CARA DELANTERA (FRONT) --- */
        .card-face.front {
            display: grid; grid-template-columns: 140px 1fr; gap: 0;
            font-family: 'Rajdhani', sans-serif; color: #e0e0e0;
        }
        
        /* Holograma Frontal */
        .card-face.front::after {
            content: ""; position: absolute; inset: -50%;
            background: linear-gradient(135deg, transparent 40%, rgba(0, 255, 136, 0.2) 45%, rgba(0, 119, 255, 0.2) 50%, rgba(0, 255, 136, 0.2) 55%, transparent 60%);
            mix-blend-mode: color-dodge;
            animation: holo-shift 8s linear infinite;
            pointer-events: none; z-index: 50; opacity: 0.6;
        }

        /* --- CARA TRASERA (BACK - NUEVO DISEÑO) --- */
        .card-face.back {
            transform: rotateY(180deg); /* Empieza dada vuelta */
            display: flex; flex-direction: column;
            background-color: #0a0a0a;
            font-family: 'Share Tech Mono', monospace;
        }
        
        .magnetic-stripe {
            height: 50px; width: 100%; background: #111;
            margin-top: 30px;
            background-image: repeating-linear-gradient(90deg, #000 0px, #000 2px, #111 2px, #111 4px);
        }

        .back-content { padding: 20px; display: flex; flex-direction: column; gap: 10px; flex-grow: 1; }

        .signature-panel {
            background: #fff; height: 40px; width: 80%;
            margin-bottom: 10px;
            display: flex; align-items: center; justify-content: center;
            position: relative;
            background-image: url('data:image/svg+xml;utf8,<svg width="100" height="40" viewBox="0 0 100 40" xmlns="http://www.w3.org/2000/svg"><text x="50%" y="50%" font-size="10" fill="%23eee" dominant-baseline="middle" text-anchor="middle">AUTHORIZED SIGNATURE</text></svg>');
        }
        .real-signature {
            font-family: 'Mrs Saint Delafield', cursive; font-size: 28px; color: #000;
            transform: rotate(-2deg);
        }

        .legal-text { font-size: 8px; color: #666; line-height: 1.2; text-align: justify; }
        
        .back-footer { margin-top: auto; display: flex; justify-content: space-between; align-items: flex-end; }
        .barcode-box { font-family: 'Libre Barcode 39 Text'; font-size: 32px; color: #888; }

        /* --- Estilos internos de la tarjeta (Front) --- */
        @media (max-width: 600px) {
            .scene-3d { height: 500px; } /* Más alto en móvil para apilar */
            .card-face.front { grid-template-columns: 1fr; text-align: center; }
            .id-sidebar { flex-direction: row; width: 100%; border-right: none; border-bottom: 1px solid #333; padding: 10px; justify-content: center; gap: 15px; flex-wrap: wrap; } 
            .vertical-text { display: none; } 
        }

        .security-pattern { position: absolute; inset: 0; background-image: url('data:image/svg+xml;utf8,<svg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"><text x="30" y="30" font-size="4" fill="%23ffffff" opacity="0.05" font-family="monospace" text-anchor="middle" dominant-baseline="middle" transform="rotate(-30 30 30)">LEVIATHAM OFFICIAL</text></svg>'); z-index: 0; pointer-events: none; }
        .id-header { grid-column: 1 / -1; display: flex; justify-content: space-between; align-items: flex-end; border-bottom: 2px solid var(--primary); padding: 15px 20px 10px; position: relative; z-index: 2; text-shadow: 0 2px 4px rgba(0,0,0,0.8); background: linear-gradient(to bottom, rgba(0,0,0,0.8), transparent); }
        .id-header-text h2 { font-size: 20px; font-weight: 900; letter-spacing: 3px; color: #fff; text-transform: uppercase; }
        .id-header-text span { font-size: 10px; color: var(--primary); letter-spacing: 3px; font-weight: bold; }
        
        .id-sidebar { display: flex; flex-direction: column; align-items: center; justify-content: flex-start; position: relative; z-index: 2; background: rgba(0, 20, 0, 0.3); border-right: 1px solid rgba(255,255,255,0.1); padding: 15px 0; flex-shrink: 0; overflow: hidden; }
        .vertical-text { writing-mode: vertical-rl; text-orientation: mixed; transform: rotate(180deg); font-size: 8px; color: #444; letter-spacing: 2px; margin-top: 10px; font-family: 'Share Tech Mono'; border-left: 1px solid #333; padding-left: 4px; height: 100%; max-height: 40px; }
        .id-photo-frame { width: 100px; height: 130px; border: 2px solid rgba(255,255,255,0.3); border-radius: 8px; padding: 3px; position: relative; background: #000; overflow: hidden; box-shadow: inset 0 0 15px rgba(0,0,0,1); margin-bottom: 10px; flex-shrink: 0; }
        .id-photo-frame img { width: 100%; height: 100%; object-fit: cover; border-radius: 6px; filter: grayscale(100%) contrast(1.3) brightness(0.9); position: relative; z-index: 2; }
        .qr-frame { background: white; padding: 2px; border-radius: 4px; margin-top: auto; margin-bottom: 5px; width: 60px; height: 60px; flex-shrink: 0; }
        .qr-frame img { width: 100%; height: 100%; }
        .ghost-photo { position: absolute; right: -20px; bottom: 40px; width: 120px; height: 150px; opacity: 0.15; filter: grayscale(100%) invert(1); mix-blend-mode: overlay; z-index: 1; pointer-events: none; transform: rotate(-5deg); mask-image: radial-gradient(circle, black 30%, transparent 70%); -webkit-mask-image: radial-gradient(circle, black 30%, transparent 70%); }
        .chip { width: 42px; height: 32px; background: linear-gradient(135deg, #a67c00 0%, #ffd700 50%, #a67c00 100%); border-radius: 6px; margin-bottom: 15px; box-shadow: 0 3px 5px rgba(0,0,0,0.8), inset 0 1px 0 rgba(255,255,255,0.4); position: relative; overflow: hidden; border: 1px solid #8b6508; flex-shrink: 0; }
        .chip::before { content: ""; position: absolute; inset: 0; background-image: linear-gradient(90deg, transparent 48%, rgba(0,0,0,0.5) 50%, transparent 52%), linear-gradient(0deg, transparent 48%, rgba(0,0,0,0.5) 50%, transparent 52%); background-size: 14px 100%, 100% 16px; }
        .id-main { position: relative; z-index: 2; display: flex; flex-direction: column; gap: 8px; text-shadow: 0 1px 2px rgba(0,0,0,0.8); padding: 0 20px 20px 10px; }
        .data-row { display: flex; gap: 15px; flex-wrap: wrap; }
        .data-field-v2 { flex-grow: 1; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 2px; }
        .label-v2 { font-size: 7px; color: #aaa; display: block; text-transform: uppercase; font-weight: 700; letter-spacing: 0.5px; margin-bottom: 1px; }
        .value-v2 { font-size: 13px; color: #fff; font-weight: 700; text-transform: uppercase; font-family: 'Rajdhani', sans-serif; letter-spacing: 1px; }
        .value-v2.highlight { color: var(--primary); font-size: 15px; font-weight: 800; }
        .mrz-container { font-family: 'OCR-B', 'Courier New', monospace; font-size: 13px; letter-spacing: 2px; color: #222; background: rgba(255,255,255,0.9); padding: 10px; border-radius: 4px; margin-top: auto; width: 100%; white-space: pre; overflow: hidden; font-weight: bold; text-transform: uppercase; box-shadow: inset 0 0 5px rgba(0,0,0,0.5); border: 1px solid #000; }
        
        .signature-field {
            font-family: 'Mrs Saint Delafield', cursive;
            font-size: 24px;
            color: rgba(0, 0, 0, 0.7); 
            position: absolute;
            bottom: 60px;
            right: 20px;
            transform: rotate(-5deg);
            z-index: 5;
            text-shadow: 0 0 2px rgba(255,255,255,0.5);
            pointer-events: none;
            mix-blend-mode: multiply;
        }
        /* Firma para modo oscuro */
        .id-card .signature-field {
            color: rgba(255, 255, 255, 0.8);
            mix-blend-mode: normal;
            text-shadow: 0 0 5px rgba(0,0,0,0.8);
        }

        /* Glare Effect */
        .glare { position: absolute; width: 100%; height: 100%; top: 0; left: 0; background: radial-gradient(circle at 50% 50%, rgba(255,255,255,0.4), transparent 50%); opacity: 0; mix-blend-mode: overlay; pointer-events: none; z-index: 60; }

        /* --- EXPEDIENTE PAPEL --- */
        .paper-dossier { background-color: var(--paper); color: var(--ink); font-family: 'Special Elite', 'Courier Prime', monospace; padding: 60px; margin: 60px auto; max-width: 850px; box-shadow: 0 20px 50px rgba(0,0,0,0.9), inset 0 0 100px rgba(139, 69, 19, 0.4); position: relative; transform: rotate(-1deg); border: none; background-image: url("data:image/svg+xml;utf8,<svg viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'><filter id='n'><feTurbulence type='fractalNoise' baseFrequency='0.6' stitchTiles='stitch'/></filter><rect width='100%' height='100%' filter='url(%23n)' opacity='0.2'/></svg>"), linear-gradient(to bottom right, rgba(0,0,0,0.1) 0%, rgba(0,0,0,0) 50%, rgba(0,0,0,0.1) 100%); overflow: hidden; }
        .paper-watermark { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) rotate(-30deg) scale(1.2); font-size: 12rem; color: rgba(0,0,0,0.04); font-family: 'Black Ops One'; pointer-events: none; z-index: 0; white-space: nowrap; text-transform: uppercase; }
        .stamp-top-secret { position: absolute; top: 30px; right: 30px; border: 6px double #b00; color: #b00; font-size: 32px; font-weight: bold; font-family: 'Black Ops One', sans-serif; padding: 10px 25px; transform: rotate(-8deg); text-transform: uppercase; mix-blend-mode: multiply; opacity: 0.8; mask-image: url("data:image/svg+xml;utf8,<svg width='300' height='150' xmlns='http://www.w3.org/2000/svg'><filter id='n'><feTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4'/></filter><rect width='100%' height='100%' filter='url(%23n)' opacity='0.6'/></svg>"); }
        .stamp-copy { position: absolute; bottom: 120px; left: 50px; border: 3px solid #000080; color: #000080; font-size: 18px; font-family: 'Courier Prime'; font-weight: bold; padding: 5px 15px; transform: rotate(5deg); text-transform: uppercase; mix-blend-mode: multiply; opacity: 0.7; }
        .dossier-header-grid { display: grid; grid-template-columns: 1fr 200px; border-bottom: 4px solid #222; padding-bottom: 20px; margin-bottom: 30px; position: relative; z-index: 2; }
        .dh-title h1 { font-size: 36px; font-weight: 900; text-decoration: underline; margin-bottom: 5px; }
        .dh-meta { font-family: 'Fira Code', monospace; font-size: 11px; color: #444; }
        .dh-security-box { border: 3px solid #222; text-align: center; padding: 5px; display: flex; flex-direction: column; justify-content: center; background: rgba(0,0,0,0.05); }
        .dh-security-label { font-size: 10px; font-weight: bold; display: block; border-bottom: 2px solid #222; }
        .dh-security-level { font-family: 'Black Ops One'; font-size: 24px; color: #b00; line-height: 1.2; }
        .dossier-grid-form { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; position: relative; z-index: 2; border: 2px solid #333; padding: 15px; background: rgba(255,255,255,0.4); }
        .form-box { border: 1px solid #555; padding: 8px; position: relative; background: rgba(240, 240, 230, 0.6); }
        .form-box.span-2 { grid-column: span 2; }
        .form-box.span-4 { grid-column: span 4; }
        .box-label { display: block; font-size: 9px; font-weight: bold; text-transform: uppercase; color: #555; border-bottom: 1px dotted #777; margin-bottom: 5px; font-family: 'Fira Code', monospace; }
        .box-value { font-family: 'Special Elite', 'Courier New', monospace; font-size: 14px; color: #000; font-weight: 900; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .box-value.highlight { color: #b00; }
        .box-value.mono-sm { font-family: 'Fira Code', monospace; font-size: 11px; }
        .comms-box { background: rgba(0,0,0,0.05); padding: 15px; border-left: 4px solid #b00; font-style: italic; }
        .dossier-footer { text-center: center; margin-top: 40px; padding-top: 20px; border-top: 2px solid #333; font-family: 'Fira Code', monospace; font-size: 10px; color: #555; position: relative; z-index: 2; }

        /* --- TERMINAL LINUX BOOT --- */
        #hack-terminal { position: fixed; inset: 0; background: #000; z-index: 100; padding: 20px; font-family: 'Fira Code', 'Courier New', monospace; font-size: 14px; color: #ccc; display: none; flex-direction: column; line-height: 1.4; cursor: text; overflow: hidden; }
        .terminal-header { display: flex; flex-direction: column; align-items: center; justify-content: center; margin-bottom: 2rem; border-bottom: 1px solid #333; padding-bottom: 1rem; width: 100%; }
        .linux-ascii { color: var(--primary); font-size: 10px; line-height: 10px; white-space: pre; font-weight: bold; text-align: center; margin-bottom: 10px; text-shadow: 0 0 5px rgba(0,255,0,0.5); }
        .boot-log { flex-grow: 1; overflow-y: hidden; display: flex; flex-direction: column; justify-content: flex-end; width: 100%; max-width: 900px; margin: 0 auto; }
        .log-line { display: flex; align-items: flex-start; margin-bottom: 2px; }
        .log-time { color: #666; margin-right: 15px; min-width: 80px; }
        .log-status { font-weight: bold; margin-right: 10px; min-width: 50px; text-align: center; }
        .status-ok { color: var(--primary); }
        .status-fail { color: #ff3333; }
        .status-warn { color: #ffcc00; }
        .log-msg { color: #ddd; white-space: pre-wrap; word-break: break-all; }
        .prompt-line { display: flex; align-items: center; color: #fff; margin-top: 10px; }
        .prompt-user { color: #ff3333; font-weight: bold; }
        .prompt-host { color: #fff; }
        .prompt-path { color: #3333ff; font-weight: bold; }
        .cursor-blink { display: inline-block; width: 8px; height: 16px; background: #ccc; animation: blink 1s step-end infinite; margin-left: 5px; }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }
        .glitch { font-size: 2.5rem; font-weight: bold; text-transform: uppercase; text-shadow: 2px 2px 0px #f00, -2px -2px 0px #00f; animation: glitch 1s infinite alternate; }
        .glitch-sm { font-size: 1rem; text-shadow: 1px 1px 0px #f00, -1px -1px 0px #00f; animation: glitch 2s infinite alternate-reverse; }
        @keyframes glitch { 0% { text-shadow: 2px 2px 0px #f00; } 100% { text-shadow: -2px -2px 0px #00f; } }
    </style>
</head>
<body class="crt">
    <canvas id="neural-canvas"></canvas>
    <div class="scanline"></div>

    <!-- TERMINAL DE CARGA SYSTEM404G -->
    <div id="hack-terminal">
        <div class="terminal-header">
            <div class="mb-2 text-4xl text-green-600 animate-pulse"><i class="fas fa-biohazard"></i></div>
            <div class="linux-ascii">
  _               _       _   _                     
 | |    _____   _(_) __ _| |_| |__   __ _ _ __ ___  
 | |   / _ \ \ / / |/ _` | __| '_ \ / _` | '_ ` _ \ 
 | |__|  __/\ V /| | (_| | |_| | | | (_| | | | | | |
 |_____\___| \_/ |_|\__,_|\__|_| |_|\__,_|_| |_| |_|
            </div>
            <div class="text-xs text-gray-500 tracking-[0.3em] font-bold mt-2">KALI LINUX // LEVIATHAM EDITION v2.0</div>
        </div>
        <div class="boot-log" id="boot-log"></div>
    </div>

    <div class="container-main">
        
        <!-- HEADER -->
        <header class="text-center border-b-2 border-green-900 pb-4 mb-6">
            <h1 class="glitch tracking-widest text-white">LEVIATHAM GHOST ID</h1>
            <div class="flex justify-center gap-4 mt-2 text-xs font-bold">
                <span class="text-green-600">SYS: <span class="text-white">ONLINE</span></span>
                <span class="text-green-600">ENCRYPTION: <span class="text-white">AES-256</span></span>
                <span class="text-green-600">NODE: <span class="text-white">KALI_01</span></span>
            </div>
        </header>

        <!-- PANEL DE CONFIGURACIÓN -->
        <div id="config-panel" class="cyber-panel p-6">
            <h2 class="text-lg font-bold mb-4 border-b border-gray-700 pb-2 flex items-center">
                <i class="fas fa-fingerprint mr-2"></i> GENERADOR DE IDENTIDAD SINTÉTICA
            </h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                <div>
                    <label class="label mb-2">GÉNERO DEL OBJETIVO</label>
                    <select id="gender" class="cyber-input">
                        <option value="male">MASCULINO</option>
                        <option value="female">FEMENINO</option>
                    </select>
                </div>
                <div>
                    <label class="label mb-2">REGIÓN DE ORIGEN</label>
                    <select id="region" class="cyber-input">
                        <option value="us">ESTADOS UNIDOS (US)</option>
                        <option value="gb">REINO UNIDO (GB)</option>
                        <option value="fr">FRANCIA (FR)</option>
                        <option value="de">ALEMANIA (DE)</option>
                        <option value="es">ESPAÑA (ES)</option>
                        <option value="br">BRASIL (BR)</option>
                        <option value="mx">MÉXICO (MX)</option>
                        <option value="ru">RUSIA (RU)</option>
                    </select>
                </div>
            </div>

            <button onclick="startSequence()" class="btn-action" id="btn-forge">
                <i class="fas fa-terminal"></i> INICIAR FABRICACIÓN GHOST
            </button>
        </div>

        <!-- CONTENEDOR DE RESULTADOS -->
        <div id="results-container" class="hidden">
            
            <!-- Botón Volver -->
            <div class="flex justify-end mb-4">
                <button onclick="resetApp()" class="bg-green-900 hover:bg-green-700 text-white font-bold py-2 px-4 rounded border border-green-500 text-xs flex items-center gap-2 transition-all">
                    <i class="fas fa-undo"></i> GENERAR NUEVA IDENTIDAD
                </button>
            </div>

            <!-- TARJETA DE ACCESO MEJORADA (EFECTO 3D REAL) -->
            <div class="text-center text-xs text-gray-500 mb-2">ARRASTRA PARA ROTAR LA TARJETA</div>
            <div class="scene-3d">
                <div class="card-object">
                    <!-- CARA DELANTERA -->
                    <div class="card-face front">
                        <div class="glare"></div>
                        <div class="security-pattern"></div>
                        <img id="card-ghost-photo" class="ghost-photo" src="" alt="Ghost">
                        <div id="card-signature" class="signature-field"></div>
                        
                        <div class="id-header">
                            <div class="id-header-text">
                                <span>ESTADO SOBERANO DE</span>
                                <h2>LEVIATHAM</h2>
                            </div>
                            <i class="fas fa-fingerprint text-3xl text-green-700 opacity-80"></i>
                        </div>
                        
                        <div class="id-sidebar">
                            <div class="chip"></div>
                            <div class="id-photo-frame">
                                <img id="card-photo" src="" alt="Subject">
                            </div>
                            <div class="qr-frame">
                                <img id="card-qr" src="" alt="QR">
                            </div>
                            <div class="vertical-text">
                                SECURE ID // v2.4
                            </div>
                        </div>

                        <div class="id-main">
                            <div class="data-row">
                                <div class="data-field-v2">
                                    <span class="label-v2">SURNAME</span>
                                    <span id="card-surname" class="value-v2 highlight">---</span>
                                </div>
                                <div class="data-field-v2">
                                    <span class="label-v2">GIVEN NAMES</span>
                                    <span id="card-firstname" class="value-v2 highlight">---</span>
                                </div>
                            </div>

                            <div class="data-row">
                                <div class="data-field-v2">
                                    <span class="label-v2">NATIONALITY</span>
                                    <span id="card-nat" class="value-v2">---</span>
                                </div>
                                <div class="data-field-v2">
                                    <span class="label-v2">DATE OF BIRTH</span>
                                    <span id="card-dob" class="value-v2">---</span>
                                </div>
                                <div class="data-field-v2">
                                    <span class="label-v2">SEX</span>
                                    <span id="card-sex" class="value-v2">---</span>
                                </div>
                            </div>
                            
                            <div class="data-row">
                                <div class="data-field-v2">
                                    <span class="label-v2">DOCUMENT NO.</span>
                                    <span id="card-doc-no" class="value-v2 text-green-400">---</span>
                                </div>
                                <div class="data-field-v2">
                                    <span class="label-v2">HEIGHT</span>
                                    <span id="card-height" class="value-v2">---</span>
                                </div>
                                <div class="data-field-v2">
                                    <span class="label-v2">EYES</span>
                                    <span id="card-eyes" class="value-v2">---</span>
                                </div>
                            </div>

                            <div class="data-row">
                                <div class="data-field-v2">
                                    <span class="label-v2">DEPARTMENT</span>
                                    <span id="card-dept" class="value-v2 text-green-400">---</span>
                                </div>
                                <div class="data-field-v2">
                                    <span class="label-v2">BLOOD TYPE</span>
                                    <span id="card-blood" class="value-v2 text-red-500">---</span>
                                </div>
                                <div class="data-field-v2">
                                    <span class="label-v2">ISSUED / EXPIRES</span>
                                    <span class="value-v2" id="card-dates">--- / PERM</span>
                                </div>
                            </div>

                            <div class="data-row">
                                <div class="data-field-v2" style="border:none;">
                                    <span class="label-v2">UUID / CONTROL NUMBER</span>
                                    <span id="card-uuid" class="value-v2 text-[10px] tracking-tight">---</span>
                                </div>
                            </div>
                            
                            <div class="mrz-container" id="card-mrz">
                                P&lt;LVTUNKNOWN&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
                                0000000000XXX0000000M0000
                            </div>
                        </div>
                    </div>

                    <!-- CARA TRASERA -->
                    <div class="card-face back">
                        <div class="magnetic-stripe"></div>
                        <div class="back-content">
                            <div class="legal-text">
                                This card is the property of LEVIATHAM SECURITY OPERATIONS. 
                                It must be returned upon demand. If found, return to nearest secure node.
                                Unauthorized possession of this identification is a federal offense under Section 894-B.
                            </div>
                            <div class="signature-panel">
                                <span id="card-signature-back" class="real-signature">Signature</span>
                            </div>
                            <div class="legal-text">
                                <strong>RESTRICTION CODES:</strong> ALPHA // OMEGA // ZULU<br>
                                <strong>CLEARANCE:</strong> LEVEL 5 (UNRESTRICTED)<br>
                                <strong>ISSUING POST:</strong> BUENOS AIRES HQ
                            </div>
                            <div class="back-footer">
                                <div class="text-[10px] text-gray-500">
                                    SERVICE: +00 123 456 789<br>
                                    NODE: #KALI-01
                                </div>
                                <div class="barcode-box">*849201*</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- EXPEDIENTE FÍSICO -->
            <div class="paper-dossier">
                <div class="paper-watermark">LEVIATHAM</div>
                <div class="stamp-top-secret">TOP SECRET<br>EYES ONLY</div>
                <div class="stamp-copy">COPY 01 OF 01</div>
                
                <div class="dossier-header-grid">
                    <div class="dh-title">
                        <h1>INTELLIGENCE DOSSIER</h1>
                        <div class="dh-meta">
                            SUBJECT: <span id="doc-header-name">UNKNOWN</span> // REF: LVT-994-ALPHA
                            <br>SOURCE: DEEP_WEB INTELLIGENCE GATHERING
                        </div>
                    </div>
                    <div class="dh-security-box">
                        <span class="dh-security-label">SECURITY CLEARANCE</span>
                        <span class="dh-security-level">LEVEL 5</span>
                    </div>
                </div>

                <div class="dossier-grid-form mb-6">
                    <div class="form-box span-4" style="background: #222; color: #fff;">
                        <span class="box-label" style="color: #aaa; border-color: #555;">SECTION I: PRIMARY IDENTIFICATION</span>
                    </div>
                    <div class="form-box span-2">
                        <span class="box-label">FULL NAME / ALIAS</span>
                        <span class="box-value" id="doc-full-name">---</span>
                    </div>
                    <div class="form-box">
                        <span class="box-label">DOB</span>
                        <span class="box-value" id="doc-dob">---</span>
                    </div>
                    <div class="form-box">
                        <span class="box-label">BLOOD TYPE</span>
                        <span class="box-value highlight" id="doc-blood">---</span>
                    </div>
                    <div class="form-box span-4">
                        <span class="box-label">KNOWN SAFE HOUSE / LOCATION</span>
                        <span class="box-value mono-sm" id="doc-address">---</span>
                    </div>
                    <div class="form-box span-4">
                        <span class="box-label">COVERT FRONT COMPANY</span>
                        <span class="box-value" id="doc-company">---</span>
                    </div>

                    <div class="form-box span-4" style="background: #222; color: #fff; margin-top: 10px;">
                        <span class="box-label" style="color: #aaa; border-color: #555;">SECTION II: FINANCIAL INTELLIGENCE</span>
                    </div>
                    <div class="form-box span-2">
                        <span class="box-label">CREDIT CARD NO</span>
                        <span class="box-value" id="doc-cc">---</span>
                    </div>
                    <div class="form-box span-2">
                        <span class="box-label">EXPIRY / CVV</span>
                        <span class="box-value" id="doc-cc-exp">---</span>
                    </div>
                    <div class="form-box span-2">
                        <span class="box-label">BANK IBAN</span>
                        <span class="box-value" id="doc-iban">---</span>
                    </div>
                     <div class="form-box span-2">
                        <span class="box-label">SWIFT / BIC CODE</span>
                        <span class="box-value" id="doc-swift">---</span>
                    </div>

                    <div class="form-box span-4" style="background: #222; color: #fff; margin-top: 10px;">
                        <span class="box-label" style="color: #aaa; border-color: #555;">SECTION III: DIGITAL FOOTPRINT</span>
                    </div>
                     <div class="form-box span-2">
                        <span class="box-label">IP ADDRESS (V4)</span>
                        <span class="box-value" id="doc-ip">---</span>
                    </div>
                     <div class="form-box span-2">
                        <span class="box-label">MAC ADDRESS</span>
                        <span class="box-value mono-sm" id="doc-mac">---</span>
                    </div>
                     <div class="form-box span-2">
                        <span class="box-label">LOGIN USER</span>
                        <span class="box-value" id="doc-user">---</span>
                    </div>
                    <div class="form-box span-2">
                        <span class="box-label">PASSWORD HASH</span>
                        <span class="box-value mono-sm" id="doc-pass">---</span>
                    </div>

                    <div class="form-box span-4" style="background: #222; color: #fff; margin-top: 10px;">
                        <span class="box-label" style="color: #aaa; border-color: #555;">SECTION IV: CRYPTO ASSETS</span>
                    </div>
                    <div class="form-box span-2">
                        <span class="box-label">BTC WALLET</span>
                        <span class="box-value mono-sm" id="doc-wallet">---</span>
                    </div>
                    <div class="form-box span-2">
                        <span class="box-label">EST. BALANCE</span>
                        <span class="box-value highlight" id="doc-balance">---</span>
                    </div>
                    <div class="form-box span-4">
                        <span class="box-label">SECONDARY CRYPTO ASSET (LAUNDERED)</span>
                        <span class="box-value mono-sm" id="doc-altcoin">---</span>
                    </div>
                    
                    <div class="form-box span-4" style="background: #222; color: #fff; margin-top: 10px;">
                        <span class="box-label" style="color: #aaa; border-color: #555;">SECTION V: ASSETS & TECH FINGERPRINT</span>
                    </div>
                    <div class="form-box span-2">
                        <span class="box-label">REGISTERED VEHICLE</span>
                        <span class="box-value" id="doc-vehicle">---</span>
                    </div>
                    <div class="form-box span-2">
                        <span class="box-label">VIN NUMBER</span>
                        <span class="box-value mono-sm" id="doc-vin">---</span>
                    </div>
                    <div class="form-box span-4">
                        <span class="box-label">LAST KNOWN USER AGENT</span>
                        <span class="box-value mono-sm" style="font-size: 10px;" id="doc-ua">---</span>
                    </div>
                    
                    <div class="form-box span-4" style="background: #222; color: #fff; margin-top: 10px;">
                        <span class="box-label" style="color: #aaa; border-color: #555;">SECTION VI: MISSION STATUS</span>
                    </div>
                    <div class="form-box span-2">
                        <span class="box-label">OPERATION CODENAME</span>
                        <span class="box-value highlight" id="doc-op-name">---</span>
                    </div>
                    <div class="form-box span-2">
                        <span class="box-label">ASSIGNED EQUIPMENT</span>
                        <span class="box-value" id="doc-equipment">---</span>
                    </div>
                </div>

                 <div class="paper-section mt-6">
                     <div class="paper-title" style="background: #b00;">VII. INTERCEPTED COMMUNICATION FRAGMENT</div>
                     <div class="comms-box">
                        "<span id="doc-quote">---</span>"
                    </div>
                </div>
                
                <div class="dossier-footer">
                    WARNING: THIS DOCUMENT CONTAINS CLASSIFIED INFORMATION PROPERTY OF LEVIATHAM. 
                    <br>UNAUTHORIZED DISCLOSURE IS PUNISHABLE BY TERMINATION.
                </div>
            </div>
        </div>

        <!-- FOOTER MEJORADO -->
        <footer class="relative bg-black border-t-2 border-green-900 py-12 mt-20 overflow-hidden">
            <div class="absolute inset-0 opacity-5" style="background-image: url('data:image/svg+xml,%3Csvg width=\'60\' height=\'60\' viewBox=\'0 0 60 60\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Cg fill=\'none\' fill-rule=\'evenodd\'%3E%3Cg fill=\'%2300ff00\' fill-opacity=\'1\'%3E%3Cpath d=\'M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z\'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E');"></div>
            <div class="relative z-10 container mx-auto px-4 text-center font-mono">
                <div class="mb-6 animate-pulse"><i class="fas fa-biohazard text-5xl text-green-700 filter drop-shadow-[0_0_10px_rgba(0,255,0,0.5)]"></i></div>
                <h2 class="text-3xl md:text-5xl font-bold text-white mb-2 tracking-[0.2em] uppercase glitch" data-text="INDUSTRIAS LEVIATHAM" style="font-family: 'Rajdhani', sans-serif;">INDUSTRIAS LEVIATHAM</h2>
                <p class="text-green-500 text-sm md:text-lg tracking-[0.5em] mb-8 font-bold glitch-sm" data-text="EST. 2018 - 2025 // CIBERINTELIGENCIA GLOBAL">EST. 2018 - 2025 // CIBERINTELIGENCIA GLOBAL</p>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 max-w-4xl mx-auto text-[10px] md:text-xs text-gray-500 border-t border-green-900/50 pt-6">
                    <div class="border-r border-green-900/30"><span class="block text-green-700 mb-1">UBICACIÓN DEL NODO</span><span class="text-white">SECTOR 7G [ARG]</span></div>
                    <div class="border-r border-green-900/30"><span class="block text-green-700 mb-1">ESTADO DE RED</span><span class="text-white animate-pulse">ENCRIPTADO (AES-256)</span></div>
                    <div class="border-r border-green-900/30"><span class="block text-green-700 mb-1">OPERADORES ACTIVOS</span><span class="text-red-500 font-bold glitch" data-text="CLASIFICADO">CLASIFICADO</span></div>
                    <div><span class="block text-green-700 mb-1">ÚLTIMA COMPILACIÓN</span><span class="text-white">KERNEL V11.1.0</span></div>
                </div>
                <div class="mt-10 text-[10px] text-red-900 uppercase tracking-widest">&copy; TODOS LOS DERECHOS RESERVADOS. EL ACCESO NO AUTORIZADO SERÁ PERSEGUIDO BAJO LA LEY 26.388.</div>
            </div>
        </footer>

    </div>

    <script>
        // --- GENERADORES LOCALES ---
        function genCC() { let num = "4"; for(let i=0; i<15; i++) num += Math.floor(Math.random()*10); return num.match(/.{1,4}/g).join(" "); }
        function genExp() { return `202${Math.floor(Math.random()*5)+5}-${Math.floor(Math.random()*12)+1}`; }
        function genCVV() { return Math.floor(Math.random() * (999 - 100) + 100); }
        function genIBAN(country) { return `${country.toUpperCase()}89 ${Math.floor(Math.random()*1000)} ${Math.floor(Math.random()*1000)} ${Math.floor(Math.random()*1000)}`.replace(/ /g, ''); }
        function genSwift() { return "LVTH" + Math.random().toString(36).substring(2, 6).toUpperCase(); }
        function genIP() { return `${Math.floor(Math.random()*255)}.${Math.floor(Math.random()*255)}.${Math.floor(Math.random()*255)}.${Math.floor(Math.random()*255)}`; }
        function genMAC() { return "XX:XX:XX:XX:XX:XX".replace(/X/g, () => "0123456789ABCDEF".charAt(Math.floor(Math.random() * 16))); }
        function genUser(name) { return name.toLowerCase() + Math.floor(Math.random()*999); }
        function genPass() { return Math.random().toString(36).slice(-10); }
        function genBlood() { const b = ['A+', 'A-', 'B+', 'B-', 'O+', 'O-', 'AB+', 'AB-']; return b[Math.floor(Math.random() * b.length)]; }
        function genBank() { const b = ['LEVIATHAM UNION', 'CYBERCORP BANK', 'NEO-TOKYO TRUST', 'SILICON VALLEY SECURE']; return b[Math.floor(Math.random() * b.length)]; }
        function genVehicle() { const v = ['BLACK SUV - FORD EXPLORER', 'GREY SEDAN - TOYOTA CAMRY', 'MOTORCYCLE - KAWASAKI NINJA', 'VAN - MERCEDES SPRINTER']; return v[Math.floor(Math.random() * v.length)]; }
        function genVin() { return Math.random().toString(36).substring(2, 17).toUpperCase(); }
        function genUA() { const u = ['Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36', 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/14.1.1 Safari/605.1.15', 'Mozilla/5.0 (Linux; Android 10; SM-G960U) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.114 Mobile Safari/537.36']; return u[Math.floor(Math.random() * u.length)]; }
        function genAddress() { return "UNKNOWN SAFE HOUSE #8492, SECTOR 7"; }
        function genDept() { return "FIELD OPS"; }
        function genBeer() { return "PROJECT CHAOS"; }
        function genAppliance() { return "TACTICAL SCANNER"; }
        function genDNI(age) {
            let base, range;
            if (age < 20) { base = 50000000; range = 10000000; }
            else if (age < 30) { base = 40000000; range = 10000000; }
            else if (age < 40) { base = 30000000; range = 10000000; }
            else if (age < 50) { base = 23000000; range = 7000000; }
            else if (age < 60) { base = 16000000; range = 7000000; }
            else if (age < 70) { base = 10000000; range = 6000000; }
            else { base = 1000000; range = 9000000; }
            return Math.floor(base + Math.random() * range);
        }
        function genHeight() { return (Math.random() * (2.00 - 1.55) + 1.55).toFixed(2); }
        function genEyes() { const e = ['BROWN', 'BLUE', 'GREEN', 'HAZEL', 'GRAY']; return e[Math.floor(Math.random() * e.length)]; }
        function genCompany() { const c = ['OMEGA SOLUTIONS', 'GLOBAL DYNAMICS', 'MASSIVE DYNAMIC', 'CYBERDYNE SYSTEMS', 'ACME CORP']; return c[Math.floor(Math.random() * c.length)]; }
        function genCrypto() { return { coin_name: "Monero", symbol: "XMR" }; }

        let ghostData = {};

        // --- SECUENCIA DE INICIO ---
        function startSequence() {
            const terminal = document.getElementById('hack-terminal');
            const logOutput = document.getElementById('boot-log');
            
            terminal.style.display = 'flex';
            document.getElementById('config-panel').style.display = 'none';
            document.getElementById('results-container').classList.add('hidden'); 
            logOutput.innerHTML = '';
            
            fetchData();

            const bootMsgs = [
                { msg: "Loading Linux 5.15.0-kali3-amd64...", status: "" },
                { msg: "Loading initial ramdisk...", status: "" },
                { msg: "Starting version 247.3-7.", status: "" },
                { msg: "Mounted /dev/sdb1 as /boot.", status: "OK" },
                { msg: "Finished File System Check on /dev/disk/by-uuid/0000-0000.", status: "OK" },
                { msg: "Started udev Kernel Device Manager.", status: "OK" },
                { msg: "Found device LEVIATHAM_CRYPT_V2.", status: "OK" },
                { msg: "Starting Network Manager...", status: "..." },
                { msg: "Started Network Manager.", status: "OK" },
                { msg: "Reached target Network.", status: "OK" },
                { msg: "Starting Leviatham Ghost ID Generator Service...", status: "..." },
                { msg: "Started Leviatham Ghost ID Generator Service.", status: "OK" },
                { msg: "Checking encryption keys...", status: "OK" },
                { msg: "[WARNING] Connection attempt intercepted by Firewall.", status: "WARN" },
                { msg: "Bypassing firewall rules...", status: "OK" },
                { msg: "Connecting to TOR network relay...", status: "OK" },
                { msg: "Accessing Dark Web Database [Alpha]...", status: "OK" },
                { msg: "Injecting payload into remote server...", status: "OK" },
                { msg: "Retrieving synthetic biological assets...", status: "OK" },
                { msg: "Fetching secure financial data routes...", status: "OK" },
                { msg: "Accessing vehicle registry database...", status: "OK" },
                { msg: "Tracing digital fingerprint...", status: "OK" },
                { msg: "Locating safe house coordinates...", status: "OK" },
                { msg: "Assigning tactical equipment inventory...", status: "OK" },
                { msg: "Establishing operation codename...", status: "OK" },
                { msg: "Establishing shell company cover...", status: "OK" },
                { msg: "Diversifying crypto assets...", status: "OK" },
                { msg: "Finalizing dossier composition...", status: "OK" },
                { msg: "Starting X11 server...", status: "OK" },
                { msg: "Reached target Graphical Interface.", status: "OK" }
            ];
            
            let cmdIndex = 0;
            const logInterval = setInterval(() => {
                if(cmdIndex < bootMsgs.length) {
                    const item = bootMsgs[cmdIndex];
                    let statusHtml = '';
                    if (item.status === 'OK') statusHtml = '<span class="log-status status-ok">[  OK  ]</span>';
                    else if (item.status === 'FAIL') statusHtml = '<span class="log-status status-fail">[ FAIL ]</span>';
                    else if (item.status === 'WARN') statusHtml = '<span class="log-status status-warn">[ WARN ]</span>';
                    else if (item.status === '...') statusHtml = '<span class="log-status">[ INFO ]</span>';
                    else statusHtml = '<span class="log-status">        </span>';

                    const time = (Math.random() * 10).toFixed(6);
                    logOutput.innerHTML += `<div class="log-line"><span class="log-time">[    ${time}]</span>${statusHtml}<span class="log-msg">${item.msg}</span></div>`;
                    window.scrollTo(0, document.body.scrollHeight);
                    cmdIndex++;
                } else {
                    clearInterval(logInterval);
                    logOutput.innerHTML += `
                        <div class="prompt-line">
                            <span class="prompt-user">root@leviatham</span><span class="prompt-host">:~#</span>&nbsp;./launch_gui.sh<span class="cursor-blink"></span>
                        </div>
                    `;
                    setTimeout(() => {
                        terminal.style.display = 'none';
                        renderResults();
                    }, 1500);
                }
            }, 200);
        }

        function resetApp() {
            document.getElementById('results-container').classList.add('hidden');
            document.getElementById('config-panel').style.display = 'block';
            window.scrollTo(0, 0);
        }

        async function fetchData() {
            const gender = document.getElementById('gender').value;
            const region = document.getElementById('region').value;

            try {
                const res = await fetch(`https://randomuser.me/api/?results=1&gender=${gender}&nat=${region}`);
                const data = await res.json();
                ghostData.user = data.results[0];
            } catch (e) {
                ghostData.user = { name: { first: "John", last: "Doe" }, location: { country: "Unknown", city: "Unknown" }, dob: { date: "1990-01-01", age: 30 }, login: { uuid: "unknown-uuid", username: "ghost", password: "123" }, picture: { large: "https://robohash.org/fallback" }, nat: "US", gender: "male" };
            }

            ghostData.finance = { cc: genCC(), exp: genExp(), cvv: genCVV(), iban: genIBAN(region), swift: genSwift() };
            ghostData.net = { ip: genIP(), mac: genMAC() };

            try { const res = await fetch('https://api.adviceslip.com/advice'); const data = await res.json(); ghostData.quote = data.slip.advice; } catch(e) { ghostData.quote = "System failure. Proceed with caution."; }
            try { const res = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd'); const data = await res.json(); ghostData.btcPrice = data.bitcoin.usd; } catch(e) { ghostData.btcPrice = 60000; }
            try { const res = await fetch('https://random-data-api.com/api/v2/blood_types'); const data = await res.json(); ghostData.blood = data.group; } catch(e) { ghostData.blood = genBlood(); }
            try { const res = await fetch('https://random-data-api.com/api/v2/banks'); const data = await res.json(); ghostData.bankName = data.bank_name; } catch(e) { ghostData.bankName = genBank(); }
            try { const res = await fetch('https://random-data-api.com/api/v2/vehicles'); const data = await res.json(); ghostData.vehicle = `${data.make_and_model} (${data.color})`; ghostData.vin = data.vin; } catch(e) { ghostData.vehicle = genVehicle(); ghostData.vin = genVin(); }
            try { const res = await fetch('https://random-data-api.com/api/v2/user_agents'); const data = await res.json(); ghostData.ua = data.user_agent; } catch(e) { ghostData.ua = genUA(); }
            try { const res = await fetch('https://random-data-api.com/api/v2/addresses'); const data = await res.json(); ghostData.address = `${data.street_address}, ${data.city_name}, ${data.country}`; } catch(e) { ghostData.address = genAddress(); }
            try { const res = await fetch('https://random-data-api.com/api/v2/commerce'); const data = await res.json(); ghostData.dept = data.department; } catch(e) { ghostData.dept = genDept(); }
            try { const res = await fetch('https://random-data-api.com/api/v2/beers'); const data = await res.json(); ghostData.opName = data.name; } catch(e) { ghostData.opName = genBeer(); }
            try { const res = await fetch('https://random-data-api.com/api/v2/appliances'); const data = await res.json(); ghostData.equipment = data.equipment; } catch(e) { ghostData.equipment = genAppliance(); }
            try { const res = await fetch('https://random-data-api.com/api/v2/company'); const data = await res.json(); ghostData.company = data.business_name; } catch(e) { ghostData.company = genCompany(); }
            try { const res = await fetch('https://random-data-api.com/api/v2/crypto_coin'); const data = await res.json(); ghostData.altcoin = `${data.coin_name} (${data.symbol})`; } catch(e) { const c = genCrypto(); ghostData.altcoin = `${c.coin_name} (${c.symbol})`; }
        }

        // --- SAFE SETTER ---
        function setVal(id, val) {
            const el = document.getElementById(id);
            if (el) el.innerText = val;
            // else console.warn("Elemento no encontrado:", id); // Silenced for production feel
        }

        function renderResults() {
            const u = ghostData.user;
            const age = u.dob.age;
            
            const userPic = document.getElementById('card-photo'); if(userPic) userPic.src = u.picture.large;
            const ghostPic = document.getElementById('card-ghost-photo'); if(ghostPic) ghostPic.src = u.picture.large;
            
            const qrData = `ID:${u.login.uuid}|${u.name.last},${u.name.first}|OP:${ghostData.opName}`;
            const qrImg = document.getElementById('card-qr');
            if(qrImg) qrImg.src = `https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent(qrData)}`;

            setVal('card-surname', u.name.last.toUpperCase());
            setVal('card-firstname', u.name.first.toUpperCase());
            
            const sig = `${u.name.first} ${u.name.last}`;
            setVal('card-signature', sig);
            setVal('card-signature-back', sig);
            
            const natLabel = (document.getElementById('region').value === 'ru') ? 'RUS' : u.nat;
            setVal('card-nat', natLabel);
            
            const dob = new Date(u.dob.date);
            setVal('card-dob', dob.toLocaleDateString());
            setVal('card-sex', (u.gender === 'male') ? 'M' : 'F');
            setVal('card-uuid', u.login.uuid);
            
            setVal('card-blood', ghostData.blood || genBlood());
            setVal('card-dept', (ghostData.dept || genDept()).toUpperCase());
            setVal('card-doc-no', genDNI(age));
            setVal('card-height', genHeight() + " M");
            setVal('card-eyes', genEyes());

            const issued = new Date(); issued.setFullYear(issued.getFullYear() - 1);
            setVal('card-dates', `${issued.toLocaleDateString()} / PERM`);

            const mrz1 = `P<LVT${u.name.last.toUpperCase()}<<${u.name.first.toUpperCase()}`;
            const rnd = Math.floor(Math.random() * 9999999);
            const mrz2 = `${u.login.uuid.substring(0,9).toUpperCase()}${u.nat}000000${u.gender==='male'?'M':'F'}${rnd}`;
            const mrzEl = document.getElementById('card-mrz');
            if(mrzEl) mrzEl.innerHTML = `${mrz1.substring(0,44)}<br>${mrz2.substring(0,44)}`;

            // EXPEDIENTE
            setVal('doc-header-name', `${u.name.last}, ${u.name.first}`.toUpperCase());
            setVal('doc-full-name', `${u.name.first} ${u.name.last}`.toUpperCase());
            setVal('doc-dob', dob.toLocaleDateString());
            setVal('doc-blood', ghostData.blood || genBlood());
            setVal('doc-address', (ghostData.address || genAddress()).toUpperCase());
            setVal('doc-company', (ghostData.company || genCompany()).toUpperCase());
            setVal('doc-cc', ghostData.finance.cc);
            setVal('doc-cc-exp', `${ghostData.finance.exp} / CVV: ${ghostData.finance.cvv}`);
            setVal('doc-iban', ghostData.finance.iban);
            setVal('doc-swift', ghostData.finance.swift);
            setVal('doc-ip', ghostData.net.ip);
            setVal('doc-mac', ghostData.net.mac);
            setVal('doc-user', u.login.username);
            setVal('doc-pass', u.login.sha256.substring(0, 32)); 
            const btcAmt = (Math.random() * 2.5).toFixed(4);
            const btcVal = (btcAmt * ghostData.btcPrice).toLocaleString('en-US', {style:'currency', currency:'USD'});
            setVal('doc-wallet', "bc1q" + u.login.sha256.substring(0, 34));
            setVal('doc-balance', `${btcAmt} BTC (${btcVal})`);
            setVal('doc-altcoin', (ghostData.altcoin || "XMR (Monero)").toUpperCase());
            setVal('doc-vehicle', (ghostData.vehicle || genVehicle()).toUpperCase());
            setVal('doc-vin', ghostData.vin || genVin());
            setVal('doc-ua', ghostData.ua || genUA());
            setVal('doc-op-name', `OPERATION: ${(ghostData.opName || genBeer()).toUpperCase()}`);
            setVal('doc-equipment', (ghostData.equipment || genAppliance()).toUpperCase());
            setVal('doc-quote', `${ghostData.quote}`);

            document.getElementById('results-container').classList.remove('hidden');
            window.scrollTo(0, 0);
        }

        // --- SCRIPT 3D INTERACTIVO DRAG-TO-ROTATE ---
        (function() {
            const cardObject = document.querySelector('.card-object');
            const scene = document.querySelector('.scene-3d');
            const glare = document.querySelector('.glare');

            let isDragging = false;
            let startX, startY;
            let currentX = 0, currentY = 0;
            let rotationX = 0, rotationY = 0;

            const startDrag = (e) => {
                isDragging = true;
                const clientX = e.touches ? e.touches[0].clientX : e.clientX;
                const clientY = e.touches ? e.touches[0].clientY : e.clientY;
                startX = clientX - currentX;
                startY = clientY - currentY;
                scene.style.cursor = 'grabbing';
            };

            const drag = (e) => {
                if (!isDragging) return;
                e.preventDefault();
                
                const clientX = e.touches ? e.touches[0].clientX : e.clientX;
                const clientY = e.touches ? e.touches[0].clientY : e.clientY;

                currentX = clientX - startX;
                currentY = clientY - startY;

                // Mapear movimiento a grados (ajustar sensibilidad)
                rotationY = currentX * 0.5; 
                rotationX = -(currentY * 0.5); // Invertir Y para movimiento natural

                // Limitar rotación X para que no de vueltas locas verticales
                if(rotationX > 45) rotationX = 45;
                if(rotationX < -45) rotationX = -45;

                updateTransform();
            };

            const endDrag = () => {
                isDragging = false;
                scene.style.cursor = 'grab';
                // Efecto de inercia o mantener posición. Aquí mantenemos posición para inspección.
            };
            
            const updateTransform = () => {
                cardObject.style.transform = `rotateX(${rotationX}deg) rotateY(${rotationY}deg)`;
                
                // Mover glare dinámicamente basado en la rotación
                // Normalizamos rotación para mover el gradiente
                const gX = 50 + (rotationY % 360) / 3;
                const gY = 50 - (rotationX) / 2;
                if(glare) {
                    glare.style.background = `radial-gradient(circle at ${gX}% ${gY}%, rgba(255,255,255,0.4), transparent 50%)`;
                    glare.style.opacity = Math.max(0, 0.5 - (Math.abs(rotationY%180)/180)); // Brilla más de frente
                }
            };

            // Resetear con doble click/tap
            const resetRotation = () => {
                currentX = 0; currentY = 0;
                rotationX = 0; rotationY = 0;
                cardObject.style.transition = 'transform 0.5s ease-out';
                updateTransform();
                setTimeout(() => { cardObject.style.transition = 'transform 0.1s'; }, 500); // Quitar transición para drag fluido
            };

            // Listeners Mouse
            scene.addEventListener('mousedown', startDrag);
            window.addEventListener('mousemove', drag); // Window para no perder drag si sales del div
            window.addEventListener('mouseup', endDrag);
            scene.addEventListener('dblclick', resetRotation);

            // Listeners Touch
            scene.addEventListener('touchstart', startDrag, {passive: false});
            window.addEventListener('touchmove', drag, {passive: false});
            window.addEventListener('touchend', endDrag);
            
            // Inicializar
            updateTransform();

        })();

        // --- ANIMACIÓN DE FONDO ---
        (function() {
            const canvas = document.getElementById('neural-canvas');
            const ctx = canvas.getContext('2d');
            let w, h, particles = [];
            function initCanvas() { w = canvas.width = window.innerWidth; h = canvas.height = window.innerHeight; particles = []; for(let i=0; i<60; i++) { particles.push({x: Math.random()*w, y: Math.random()*h, vx: (Math.random()-0.5)*0.5, vy: (Math.random()-0.5)*0.5}); } }
            function animateCanvas() { ctx.clearRect(0,0,w,h); ctx.fillStyle = '#00ff00'; ctx.strokeStyle = 'rgba(0, 255, 0, 0.15)'; particles.forEach((p, i) => { p.x += p.vx; p.y += p.vy; if(p.x<0 || p.x>w) p.vx*=-1; if(p.y<0 || p.y>h) p.vy*=-1; ctx.beginPath(); ctx.arc(p.x, p.y, 1.5, 0, Math.PI*2); ctx.fill(); for(let j=i+1; j<particles.length; j++) { const p2 = particles[j]; if(Math.hypot(p.x-p2.x, p.y-p2.y) < 100) { ctx.beginPath(); ctx.moveTo(p.x, p.y); ctx.lineTo(p2.x, p2.y); ctx.stroke(); } } }); requestAnimationFrame(animateCanvas); }
            window.addEventListener('resize', initCanvas); initCanvas(); animateCanvas();
        })();
    </script>
</body>
</html>
